<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æŒã¡ç‰©ç®¡ç†ã‚¢ãƒ—ãƒª</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    input, select, button { margin: 5px; }
    .item { margin: 5px 0; }
  </style>
</head>
<body>

  <h1>æŒã¡ç‰©ç®¡ç†ã‚¢ãƒ—ãƒª</h1>

  <!-- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ -->
  <div>
    <label>æ¤œç´¢: <input type="text" id="searchBox" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ãƒ»åˆ¶ä½œè€…ã§æ¤œç´¢"></label>
    <button id="searchBtn">æ¤œç´¢</button>
    <button id="clearSearchBtn">ã‚¯ãƒªã‚¢</button>
  </div>

  <!-- ä¸¦ã³æ›¿ãˆãƒœã‚¿ãƒ³ -->
  <div>
    <label>ä¸¦ã³æ›¿ãˆ:</label>
    <button id="sortTypeBtn">ç¨®åˆ¥é †</button>
    <button id="sortTitleBtn">ã‚¿ã‚¤ãƒˆãƒ«é †</button>
    <button id="sortCreatorBtn">åˆ¶ä½œè€…é †</button>
  </div>

  <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div>
    <label>ç¨®åˆ¥: 
      <select id="type">
        <option value="book">æœ¬</option>
        <option value="cd">CD</option>
        <option value="record">ãƒ¬ã‚³ãƒ¼ãƒ‰</option>
      </select>
    </label>
    <label>ã‚¿ã‚¤ãƒˆãƒ«: <input type="text" id="title"></label>
    <label>åˆ¶ä½œè€…: <input type="text" id="creator"></label>
    <button id="saveBtn">ç™»éŒ²</button>
  </div>

  <h2>ä¸€è¦§</h2>
  <div id="list"></div>

  <script>
    let items = [];

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«localStorageã‹ã‚‰å¾©å…ƒ
    window.onload = function() {
      const saved = localStorage.getItem('myCollection');
      if (saved) {
        items = JSON.parse(saved);
        renderList();
      }
    };

    // ä¿å­˜ãƒœã‚¿ãƒ³
    document.getElementById('saveBtn').onclick = function() {
      const type = document.getElementById('type').value;
      const title = document.getElementById('title').value.trim();
      const creator = document.getElementById('creator').value.trim();

      if (title === "" || creator === "") {
        alert("ã‚¿ã‚¤ãƒˆãƒ«ã¨åˆ¶ä½œè€…ã¯å¿…é ˆã§ã™");
        return;
      }

      // é‡è¤‡ãƒã‚§ãƒƒã‚¯
      const duplicate = items.some(item => item.type === type && item.title === title);
      if (duplicate) {
        alert("ã™ã§ã«åŒã˜ã‚¿ã‚¤ãƒˆãƒ«ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼");
        return;
      }

      const newItem = { type, title, creator };
      items.push(newItem);
      localStorage.setItem('myCollection', JSON.stringify(items));
      renderList();

      document.getElementById('title').value = "";
      document.getElementById('creator').value = "";
    };

    // æ¤œç´¢ãƒœã‚¿ãƒ³
    document.getElementById('searchBtn').onclick = function() {
      const keyword = document.getElementById('searchBox').value.trim().toLowerCase();
      if (keyword === "") {
        renderList();
        return;
      }

      const filtered = items.filter(item =>
        item.title.toLowerCase().includes(keyword) ||
        item.creator.toLowerCase().includes(keyword)
      );

      renderList(filtered);
    };

    // ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³
    document.getElementById('clearSearchBtn').onclick = function() {
      document.getElementById('searchBox').value = "";
      renderList();
    };

    // ä¸¦ã³æ›¿ãˆãƒœã‚¿ãƒ³
    document.getElementById('sortTypeBtn').onclick = function() {
      items.sort((a, b) => a.type.localeCompare(b.type));
      renderList();
    };
    document.getElementById('sortTitleBtn').onclick = function() {
      items.sort((a, b) => a.title.localeCompare(b.title));
      renderList();
    };
    document.getElementById('sortCreatorBtn').onclick = function() {
      items.sort((a, b) => a.creator.localeCompare(b.creator));
      renderList();
    };

    // ä¸€è¦§è¡¨ç¤º
    function renderList(displayItems) {
      const listDiv = document.getElementById('list');
      listDiv.innerHTML = "";

      const showItems = displayItems || items;

      showItems.forEach(item => {
        const div = document.createElement('div');
        div.className = "item";

        let icon = "";
        if(item.type === "book") icon = "ğŸ“˜";
        if(item.type === "cd") icon = "ğŸµ";
        if(item.type === "record") icon = "ğŸ’¿";

        div.textContent = `${icon} ${item.title} - ${item.creator} `;

        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = "å‰Šé™¤";
        deleteBtn.onclick = function() {
          items = items.filter(i => !(i.type === item.type && i.title === item.title));
          localStorage.setItem('myCollection', JSON.stringify(items));
          renderList();
        };

        div.appendChild(deleteBtn);
        listDiv.appendChild(div);
      });
    }
  </script>

</body>
<div>
    <label>ç¨®åˆ¥ã§çµã‚Šè¾¼ã¿:</label>
    <button id="filterBookBtn">æœ¬</button>
    <button id="filterCDBtn">CD</button>
    <button id="filterRecordBtn">ãƒ¬ã‚³ãƒ¼ãƒ‰</button>
    <button id="filterAllBtn">ã™ã¹ã¦</button>
  </div>

